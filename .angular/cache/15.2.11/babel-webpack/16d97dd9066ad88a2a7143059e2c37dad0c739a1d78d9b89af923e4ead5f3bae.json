{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"@angular/common\";\nfunction ClaimHistoryComponent_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"span\", 4);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const entry_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r2 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(entry_r1.userId.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(entry_r1.pointsClaimed);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(10, 4, entry_r1.claimedAt, \"short\"));\n  }\n}\nexport class ClaimHistoryComponent {\n  constructor(userService) {\n    this.userService = userService;\n    this.history = [];\n  }\n  ngOnInit() {\n    this.fetchHistory();\n    // Optional: refresh every 10 seconds\n    setInterval(() => this.fetchHistory(), 10000);\n  }\n  fetchHistory() {\n    this.userService.getHistory().subscribe(data => {\n      // Sort latest first\n      this.history = data.sort((a, b) => new Date(b.claimedAt).getTime() - new Date(a.claimedAt).getTime());\n    });\n  }\n  static {\n    this.ɵfac = function ClaimHistoryComponent_Factory(t) {\n      return new (t || ClaimHistoryComponent)(i0.ɵɵdirectiveInject(i1.UserService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ClaimHistoryComponent,\n      selectors: [[\"app-claim-history\"]],\n      decls: 16,\n      vars: 1,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"table\", \"table-bordered\", \"table-sm\", \"table-hover\"], [1, \"table-light\"], [4, \"ngFor\", \"ngForOf\"], [1, \"badge\", \"bg-success\"]],\n      template: function ClaimHistoryComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h4\");\n          i0.ɵɵtext(2, \"Claim History\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"table\", 1)(4, \"thead\", 2)(5, \"tr\")(6, \"th\");\n          i0.ɵɵtext(7, \"#\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"th\");\n          i0.ɵɵtext(9, \"User\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"th\");\n          i0.ɵɵtext(11, \"Points\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"th\");\n          i0.ɵɵtext(13, \"Time\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(14, \"tbody\");\n          i0.ɵɵtemplate(15, ClaimHistoryComponent_tr_15_Template, 11, 7, \"tr\", 3);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(15);\n          i0.ɵɵproperty(\"ngForOf\", ctx.history);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.DatePipe],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"mappings":";;;;;IAYMA,0BAAiD;IAC3CA,YAAW;IAAAA,iBAAK;IACpBA,0BAAI;IAAAA,YAAuB;IAAAA,iBAAK;IAChCA,0BAAI;IAA+BA,YAAyB;IAAAA,iBAAO;IACnEA,0BAAI;IAAAA,YAAqC;;IAAAA,iBAAK;;;;;IAH1CA,eAAW;IAAXA,8BAAW;IACXA,eAAuB;IAAvBA,0CAAuB;IACQA,eAAyB;IAAzBA,4CAAyB;IACxDA,eAAqC;IAArCA,wEAAqC;;;ACRjD,OAAM,MAAOC,qBAAqB;EAGhCC,YAAoBC,WAAwB;IAAxB,gBAAW,GAAXA,WAAW;IAF/B,YAAO,GAAmB,EAAE;EAEmB;EAE/CC,QAAQ;IACN,IAAI,CAACC,YAAY,EAAE;IAEnB;IACAC,WAAW,CAAC,MAAM,IAAI,CAACD,YAAY,EAAE,EAAE,KAAK,CAAC;EAC/C;EAEAA,YAAY;IACV,IAAI,CAACF,WAAW,CAACI,UAAU,EAAE,CAACC,SAAS,CAAEC,IAAI,IAAI;MAC/C;MACA,IAAI,CAACC,OAAO,GAAGD,IAAI,CAACE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIC,IAAI,CAACD,CAAC,CAACE,SAAS,CAAC,CAACC,OAAO,EAAE,GAAG,IAAIF,IAAI,CAACF,CAAC,CAACG,SAAS,CAAC,CAACC,OAAO,EAAE,CAAC;IACvG,CAAC,CAAC;EACJ;;;uBAjBWf,qBAAqB;IAAA;EAAA;;;YAArBA,qBAAqB;MAAAgB;MAAAC;MAAAC;MAAAC;MAAAC;QAAA;UDRlCrB,8BAA4B;UACtBA,6BAAa;UAAAA,iBAAK;UACtBA,gCAAyD;UAG/CA,iBAAC;UAAAA,iBAAK;UACVA,0BAAI;UAAAA,oBAAI;UAAAA,iBAAK;UACbA,2BAAI;UAAAA,uBAAM;UAAAA,iBAAK;UACfA,2BAAI;UAAAA,qBAAI;UAAAA,iBAAK;UAGjBA,8BAAO;UACLA,uEAKK;UACPA,iBAAQ;;;UANgBA,gBAAY;UAAZA,qCAAY","names":["i0","ClaimHistoryComponent","constructor","userService","ngOnInit","fetchHistory","setInterval","getHistory","subscribe","data","history","sort","a","b","Date","claimedAt","getTime","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Admin\\Desktop\\leaderboard\\leaderboard-frontend\\src\\app\\components\\claim-history\\claim-history.component.html","C:\\Users\\Admin\\Desktop\\leaderboard\\leaderboard-frontend\\src\\app\\components\\claim-history\\claim-history.component.ts"],"sourcesContent":["<div class=\"container mt-4\">\n  <h4>Claim History</h4>\n  <table class=\"table table-bordered table-sm table-hover\">\n    <thead class=\"table-light\">\n      <tr>\n        <th>#</th>\n        <th>User</th>\n        <th>Points</th>\n        <th>Time</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let entry of history; let i = index\">\n        <td>{{ i + 1 }}</td>\n        <td>{{ entry.userId.name }}</td>\n        <td><span class=\"badge bg-success\">{{ entry.pointsClaimed }}</span></td>\n        <td>{{ entry.claimedAt | date: 'short' }}</td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ClaimHistory } from '../../models/history';\nimport { UserService } from '../../services/user.service';\n\n@Component({\n  selector: 'app-claim-history',\n  templateUrl: './claim-history.component.html',\n})\nexport class ClaimHistoryComponent implements OnInit {\n  history: ClaimHistory[] = [];\n\n  constructor(private userService: UserService) {}\n\n  ngOnInit(): void {\n    this.fetchHistory();\n\n    // Optional: refresh every 10 seconds\n    setInterval(() => this.fetchHistory(), 10000);\n  }\n\n  fetchHistory(): void {\n    this.userService.getHistory().subscribe((data) => {\n      // Sort latest first\n      this.history = data.sort((a, b) => new Date(b.claimedAt).getTime() - new Date(a.claimedAt).getTime());\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}